---
- name: Provision resource group in Azure
  hosts: localhost
  gather_facts: false

  # Temporary
  vars:
    resource_group_name: azure_poc_ptoal
    storage_account_name: ptoalpoc
    operating_system: other
    publisher: MicrosoftWindowsServer
    version: latest
    azureuser: azadmin
    azurepassword: !vault |
          $ANSIBLE_VAULT;1.2;AES256;rhdemo
          35336464363933383136343062663761653365663936393366636233616166653830303932316165
          3161386333396139313938646666656336626632343534660a393463326333383330353739623862
          37363165393735636361383861633133643335316135396661376439353066356364626636666638
          6335613735343534340a633764343532656435353265303534353562343061643334313539663939
          65366133366239363330623261643266303764616465323465376433376436636263
    sku: windowsserver
    vm_size: Standard_B1s
    # vm_names: "{{ vm_name.split(',') }}"
    vm_names:
      - "{{ new_vm_hostname }}"
  roles:
    - azure_create_resource_group
    - azure_create_storage_account
    - azure_create_vm
